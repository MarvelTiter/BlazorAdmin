@using BlazorWebAdmin.Template.Tables
@using Project.Models.Entities
@using Project.Models.Request
@page "/user/index"

<TableTemplate TableOptions=tableOptions TData=User TQuery=GeneralReq></TableTemplate>

@code {
	TableOptions<User, GeneralReq> tableOptions;

	protected override void OnInitialized()
	{
		base.OnInitialized();
		tableOptions = new TableOptions<User, GeneralReq>();
		tableOptions.Columns = typeof(User).GenerateColumns();
		tableOptions.DataLoader = Load;
	}

	async Task<QueryResult<PagingResult<User>>> Load(GeneralReq req)
	{
		List<User> users = new List<User>();
		var length = new Random().Next(5, 15);
		for (var i = 0; i < length; i++)
		{
			var u = new User();
			u.Age = i + 10;
			u.UserName = $"Hello -> {i}";
			users.Add(u);
			await Task.Delay(200);
		}
		return QueryResult<User>.PagingResult(users,users.Count);
	}
}
