@namespace BlazorWeb.Shared.Components
@inherits JsComponentBase
<div style="width:@($"{Width}px");padding:0;">
    <div style="border:1px solid #ccc;position:relative;padding:0;margin:0;width:@($"{Width}px");height:@($"{Height}px")">
        <video @ref=videoDom style="width:100%;height:100%;object-fit:fill;"></video>
        <div @ref=clipDom style="position:absolute;border:1px solid red;z-index:9999;display:none;resize: both;overflow: hidden;min-width:200px;min-height:100px;cursor:move;">
        </div>
        <canvas @ref=canvasDom style="display:none"></canvas>
    </div>
    <div style="width:100%;text-align:center;margin-top:10px;">
        @*@foreach (var d in Devices.Where(d => d.Kind == "videoinput"))
        {
        <p @onclick=@(()=>cameraHelper.InvokeVoidAsync("loadUserMedia", videoDom, d.DeviceId, 1280,720))>@d.DeviceId : @d.Kind , @d.Label</p>
        }*@
        @if (DeviceSelectorRender != null)
        {
            @DeviceSelectorRender(Devices)
        }
        else
        {
            <CustomSelect Options="dropdownDevices" @bind-Value=selectedDeviceId Style="width:200px;"></CustomSelect>
            <Button OnClick="Start" Type="@ButtonType.Primary" Disabled=playButtonStatus>开启</Button>
            <Button OnClick="Stop" Type="@ButtonType.Primary" Disabled=!playButtonStatus>关闭</Button>
            <Button OnClick="Capture" Type="@ButtonType.Primary" Disabled=!playButtonStatus>拍照</Button>
        }
    </div>
</div>
