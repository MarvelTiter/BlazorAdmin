@using Project.Constraints.UI.Form
@typeparam TData where TData : class, new()
<Form Model="@Options.Data" LabelColSpan="@Options.LabelSpan" OnFinish=OnFinish WrapperColSpan="@Options.WrapperSpan">
    @foreach (var row in Options.GetRows())
    {
        var colSpan = 24 / row.Count();
        var lblSpan = GetLabelSpan(colSpan);
        <GridRow>
            @foreach (var col in row)
            {
                <GridCol Span="colSpan">
                    <FormItem LabelColSpan="lblSpan" Label="@(Localizer[col.Label])">
                        <InputBuilder Data="Options.Data" UI="Options.UI" Reciver="Options" Column="col"></InputBuilder>
                    </FormItem>
                </GridCol>
            }
        </GridRow>
    }
</Form>
@code {
    [Parameter] public FormOptions<TData> Options { get; set; }
    [Inject] IStringLocalizer<TData> Localizer { get; set; }
    private int GetLabelSpan(int colSpan)
    {
        if (colSpan == 24)
            return 6;

        return Options.LabelSpan;
    }

    Task OnFinish(EditContext context)
    {
        // context.Validate();
        return Task.CompletedTask;
    }
}
