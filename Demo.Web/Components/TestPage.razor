@page "/test"
@using Project.Common.Attributes
@using Project.Constraints.Page
@using Project.Constraints.Services
@using Project.Models.Entities
@using Project.UI.AntBlazor
@using Project.Web.Shared.ComponentHelper
@attribute [PageInfo(Title = "测试")]
@inherits BasicComponent
<MGrid MinWidth="300" Gap="10px">
    <MGridContent ColSpan="(1,3)" RowSpan="(1,3)">
        <div class="item" style="height:100%">123</div>
    </MGridContent>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
</MGrid>

<AntDesign.Table DataSource="users">
    <AntDesign.PropertyColumn Property="u=>u.UserId"></AntDesign.PropertyColumn>
    <AntDesign.PropertyColumn Property="u=>u.UserName"></AntDesign.PropertyColumn>
    <AntDesign.PropertyColumn Property="u=>u.Password"></AntDesign.PropertyColumn>
    <AntDesign.PropertyColumn Property="u=>u.Age"></AntDesign.PropertyColumn>
    <AntDesign.PropertyColumn Property="u=>u.LastLogin"></AntDesign.PropertyColumn>
    <AntDesign.ActionColumn Title="操作">
        <AntDesign.Button>查看</AntDesign.Button>
    </AntDesign.ActionColumn>
</AntDesign.Table>
UI.BuildCheckBoxGroup:
@(UI.BuildCheckBoxGroup<User, string>(this, users)
    .LabelExpression(u => u.UserName)
    .ValueExpression(u => u.UserId)
    .Bind(() => checkedUsers, Changed)
    .Render())
<br />AntDesign.CheckboxGroup:
<AntDesign.CheckboxGroup @bind-Value=checkedUsers
                         OnChange="Changed2"
                         Options="users.ConvertToCheckBoxOptions(u=>u.UserName, u=>u.UserId)">
</AntDesign.CheckboxGroup>
<br />
@(string.Join(",", checkedUsers ?? []))
<br />UI.BuildRadioGroup
@(UI.BuildRadioGroup<User, string>(this, users)
    .LabelExpression(u => u.UserName)
    .ValueExpression(u => u.UserId)
    .Bind(() => selectedUser, Changed)
    .Render())
&nbsp; selected: @selectedUser

<Project.Web.Shared.Components.IconSelector @bind-Value=selectedUser></Project.Web.Shared.Components.IconSelector>
@code {
    [Inject] IUserService UserService { get; set; }
    string[] checkedUsers;
    string selectedUser;
    IEnumerable<User> users = Enumerable.Empty<User>();
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        var result = await UserService.GetUserListAsync(new Project.Constraints.Models.Request.GenericRequest<User>());
        users = result.Payload;
    }
    Task Changed2(string[] values)
    {
        Console.WriteLine(string.Join(",", values ?? []));
        return Task.CompletedTask;
    }
    Task Changed()
    {
        Console.WriteLine(string.Join(",", checkedUsers ?? []));
        return Task.CompletedTask;
    }

}

<style>
    .item {
        border: solid 1px black;
        height: 300px;
    }
</style>
